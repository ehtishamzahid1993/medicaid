<?xml version="1.0"?>
<f:view xmlns="http://www.w3.org/1999/xhtml"
   xmlns:f="http://xmlns.jcp.org/jsf/core"
   xmlns:h="http://xmlns.jcp.org/jsf/html"
   xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
   xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
   xmlns:fn="http://java.sun.com/jsp/jstl/functions"
   xmlns:p="http://primefaces.org/ui">
 
<h:head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"></link>
<h:outputStylesheet library="css" name="style.css"/>

</h:head>
<h:body>

   
    
    <div class="container">
  			<div class="row">
    			<div class="col-sm-9 col-md-6 col-lg-12">  
    				<h:panelGroup rendered="#{!referralBean.isEdit}"> <h1 >New Referral</h1>  </h:panelGroup>
    				<h:panelGroup rendered="#{referralBean.isEdit}"> <h1 >Edit Referral</h1>  </h:panelGroup>
    			</div>    			
  			</div>
  			
  			<h:form>
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Referral Centers*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:selectManyMenu id="advanced" value="#{referralBean.selectedFacilities}"
                            converter="#{facilityConverter}" 
                            var="c" showCheckbox="true" required="true">
			            <f:selectItems value="#{referralBean.facilities}" var="country" itemLabel="#{country.name}"
			                            itemValue="#{country}" />
			
			
			            <p:column>
			                <h:outputText value="#{c.name}"/>
			            </p:column>
			        </p:selectManyMenu>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Date Referred*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:datePicker style="width:100%;" id="dateReferred" required="true" value="#{referralBean.referral.dateReferred}"  maxdate="#{referralBean.todaysDate}"/>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Facility Contact*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:selectOneMenu id="facilityAdmin" value="#{referralBean.referral.facilityAdmin}" required="true">
		                    <f:selectItem itemLabel="Select One" itemValue=""/>
		                    <f:selectItems value="#{referralBean.facilityAdminList}" var="c" 
		                    itemLabel="#{c.firstName} #{c.lastName}" itemValue="#{c.screenName}"/>
		                </p:selectOneMenu>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Patient*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:selectOneMenu id="patient" value="#{referralBean.referral.patientId}" required="true">
		                    <f:selectItem itemLabel="Select One" itemValue=""/>
		                    <f:selectItems value="#{referralBean.patientList}" var="c" 
		                    itemLabel="#{c.firstName} #{c.lastName}" itemValue="#{c.patientId}"/>
		                </p:selectOneMenu>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Submit Date*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:datePicker style="width:100%;" id="submitDate" required="true" value="#{referralBean.referral.submitDate}"  maxdate="#{referralBean.todaysDate}"/>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Approved Date"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:datePicker style="width:100%;" id="approvedDate" value="#{referralBean.referral.approvedDate}"  maxdate="#{referralBean.todaysDate}"/>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Pending Date"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:datePicker style="width:100%;" id="pendingDate" value="#{referralBean.referral.pendingDate}"  maxdate="#{referralBean.todaysDate}"/>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Status*"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:selectOneMenu id="status" value="#{referralBean.referral.status}" required="true">
		                    <f:selectItem itemLabel="Select One" itemValue=""/>
		                    <f:selectItems value="#{referralBean.referralStatus}"/>
		                </p:selectOneMenu>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Res. Liability"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				<p:inputNumber id="resLiability" value="#{referralBean.referral.resLiability}" symbol="$"
                                symbolPosition="p"  emptyValue="empty" modifyValueOnWheel="false"
                                decimalSeparator="." thousandSeparator=","/>
	    			</div>    			
	  			</div>
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="COC Email Sent Date"></p:outputLabel>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				 <p:datePicker style="width:100%;" id="emailSentDueDate" value="#{referralBean.referral.emailSentDueDate}"  maxdate="#{referralBean.todaysDate}"/>
	    			</div>    			
	  			</div>
	  			
	  			
	  			
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<p:outputLabel value="Notes"></p:outputLabel>
	    			</div>
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				<h:panelGroup id="notesPanel" rendered="#{referralBean.isEdit}">
	    					<ui:repeat var="note" value="#{referralBean.notesList}">
				  			 		<p:inputText style="display: block;" placeholder="#{referralBean.getNoteDate(note.commentDate)}: #{note.comments} " disabled="true"></p:inputText>
								</ui:repeat>
	    				</h:panelGroup>
	    			</div>	
	    			<div class="col-sm-9 col-md-6 col-lg-12"> 	
	    				<p:inputTextarea rows="6" cols="33" value="#{referralBean.notes}"/>
	    			</div>    			
	  			</div>
	  		
	  			<div class="row">
	    			<div class="col-sm-9 col-md-6 col-lg-12">  
	    				 <p:commandButton style="margin-top:2%" value="Update Referral" rendered="#{referralBean.isEdit}"  action="#{referralBean.save}" update="@form"/>
	    				 <p:commandButton style="margin-top:2%" value="Add Referral" rendered="#{!referralBean.isEdit}"  action="#{referralBean.save}" update="@form"/>
	    			</div>    			
	  			</div>
	  			
	  			
	  			
	  		</h:form>	
  	</div>
    
    
    


</h:body>
</f:view>